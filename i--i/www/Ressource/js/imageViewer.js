// Generated by CoffeeScript 1.8.0
(function() {
  angularApp.service("imageViewerService", [
    "$q", function($q) {
      return {
        loadData: function() {
          return $q(function(resolve, reject) {
            var init, subHandler;
            init = function(data) {
              fw.pubsub.unsubscribe("/imageViewer", subHandler);
              return resolve(data);
            };
            subHandler = fw.pubsub.subscribe("/imageViewer", init, true);
            return fw.pubsub.publish("documentReady", "/imageViewer");
          });
        }
      };
    }
  ]);

  angularApp.controller("imageViewerController", [
    "$scope", "$ionicSlideBoxDelegate", "$timeout", "imageViewerResolver", function($scope, $ionicSlideBoxDelegate, $timeout, imageViewerResolver) {
      $scope.images = imageViewerResolver.images;
      $timeout((function(_this) {
        return function() {
          return $ionicSlideBoxDelegate.slide(imageViewerResolver.index, 200);
        };
      })(this), 500);
      $scope.imageStyle = function(image) {
        var style;
        style = {};
        style["background-image"] = "url(" + image.url + ")";
        if (image.width < image.height) {
          style.width = "100%";
        } else {
          style.height = "100%";
        }
        return style;
      };
      return $scope.close = function() {
        return fw.goToPage(imageViewerResolver.backTo, {});
      };
    }
  ]);

}).call(this);
